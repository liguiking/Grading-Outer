jQuery.extend({createUploadIframe:function(e,t){var n="jUploadFrame"+e,r='<iframe id="'+n+'" name="'+n+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&(typeof t=="boolean"?r+=' src="javascript:false"':typeof t=="string"&&(r+=' src="'+t+'"')),r+=" />",jQuery(r).appendTo(document.body),jQuery("#"+n).get(0)},createUploadForm:function(e,t){var n="jUploadForm"+e,r="jUploadFile"+e,i=jQuery('<form  action="" method="POST" name="'+n+'" id="'+n+'" enctype="multipart/form-data"></form>'),s=jQuery("#"+t),o=jQuery(s).clone();return jQuery(s).attr("id",r),jQuery(s).before(o),jQuery(s).appendTo(i),jQuery(i).css("position","absolute"),jQuery(i).css("top","-1200px"),jQuery(i).css("left","-1200px"),jQuery(i).appendTo("body"),i},createMultiFileUploadForm:function(e,t){var n="jUploadForm"+e,r="jUploadFile"+e,i=jQuery('<form  action="" method="POST" name="'+n+'" id="'+n+'" enctype="multipart/form-data"></form>'),s=1;return jQuery("input[name='"+t+"']").each(function(){var e=jQuery(this),t=jQuery(e).clone();jQuery(e).appendTo(i)}),jQuery(i).css("position","absolute"),jQuery(i).css("top","-1200px"),jQuery(i).css("left","-1200px"),jQuery(i).appendTo("body"),i},createFormData:function(e,t){jQuery.isArray(t)?jQuery.each(t,function(){e.append("<input type='hidden' value='"+this.value+"' name='"+this.name+"'>")}):jQuery.isEmptyObject(t)||e.append("<input type='hidden' value='"+t.value+"' name='"+t.name+"'>")},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),n=e.fileElementId?jQuery.createUploadForm(t,e.fileElementId):jQuery.createMultiFileUploadForm(t,e.fileElementNames);e.formData&&jQuery.createFormData(n,e.formData);var r=jQuery.createUploadIframe(t,e.secureuri),i="jUploadFrame"+t,s="jUploadForm"+t;e.global&&!(jQuery.active++)&&jQuery.event.trigger("ajaxStart");var o=!1,u={};e.global&&jQuery.event.trigger("ajaxSend",[u,e]);var a=function(t){var r=document.getElementById(i);try{r.contentWindow?(u.responseText=r.contentWindow.document.body?r.contentWindow.document.body.innerHTML:null,u.responseXML=r.contentWindow.document.XMLDocument?r.contentWindow.document.XMLDocument:r.contentWindow.document):r.contentDocument&&(u.responseText=r.contentDocument.document.body?r.contentDocument.document.body.innerHTML:null,u.responseXML=r.contentDocument.document.XMLDocument?r.contentDocument.document.XMLDocument:r.contentDocument.document)}catch(s){}if(u||t=="timeout"){o=!0;var a;try{var f=u.responseXML.documentElement.innerText;a=t!="timeout"&&f!="error"?"success":"error",a!="error"?(e.success&&(e.success($.parseJSON(f),a),e.complete()),e.global&&jQuery.event.trigger("ajaxSuccess",[u,e])):e.error(data,a)}catch(s){a="error",a!="error"&&e.error&&e.error(data,a)}e.global&&jQuery.event.trigger("ajaxComplete",[u,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(u,a),jQuery(r).unbind(),setTimeout(function(){try{jQuery(r).remove(),jQuery(n).remove()}catch(t){jQuery.handleError(e,u,null,t)}},100),u=null}};e.timeout>0&&setTimeout(function(){o||a("timeout")},e.timeout);try{var n=jQuery("#"+s);jQuery(n).attr("action",e.url),jQuery(n).attr("method","POST"),jQuery(n).attr("target",i),n.encoding?jQuery(n).attr("encoding","multipart/form-data"):jQuery(n).attr("enctype","multipart/form-data"),jQuery(n).submit()}catch(f){jQuery.handleError(e,u,null,f)}return jQuery("#"+i).load(a),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data=type=="xml"||data?r.responseXML:r.responseText,type=="script"&&jQuery.globalEval(data),type=="json"&&eval("data = '"+data+"'"),type=="html"&&jQuery("<div>").html(data).evalScripts(),data}});